{% extends 'layouts/base.html.twig' %}
{% set pageTitle = 'stats' %}

{% block body %}
    <div class="col-lg-12 questionnaire" data-id="{{ questionnaire.id }}">
        {% if questionnaire.participants|length > 0 %}
            <h2>"{{ questionnaire.name }}" stats</h2>
            <h4>
                Congratulations, your questionnaire has been answered by {{ questionnaire.participants|length }}
                {{ questionnaire.participants|length == 1 ? 'participant' : 'participants' }}!
                Here are the statistics for the answers
            </h4>
            <div class="row">
                {% for question in questionnaire.questions %}
                    {% set last = loop.index == questionnaire.questions|length and questionnaire.questions|length is not divisibleby(2) %}
                    <div class="{{ last ? 'col-md-12' : 'col-md-6' }}">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4>
                                    {{ loop.index }}. {{ question.content }}
                                </h4>
                            </div>
                            <div class="panel-body questions" data-type="{{ question.type }}">
                            </div>
                            <div class="panel-footer">
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <h1>Looks like your questionnaire has not yet been viewed by anyone :(</h1>
        {% endif %}
    </div>
{% endblock %}

{% block javascript %}
    <script src="{{ asset('bundles/highcharts/highcharts.js') }}" type="application/javascript"></script>
    <script type="application/javascript" src="{{ asset('bundles/site/js/questionnaires/stats.js') }}"></script>
{% endblock %}